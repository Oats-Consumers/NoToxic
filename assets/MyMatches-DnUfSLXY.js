import{r as p,o as se,g as J,p as Q,u as ie,a as oe,b as re,c as Z,d as ue,s as ce,e as W,f as de,h as I,i as T,t as P,j as ee,k as u,m as ve,l as ae,n as te,q as fe,v as ge,w as he,x as le,y as ne,z as be,I as F,A as U,B as q,V as $,C,D as me,E as ye,_ as _e,F as xe,G as pe,H as ke,J as H,K as L,L as Ve,M as K,N as we,O as A,P as O,Q as Y,R as Pe,S as i,T as Le,U as x,W as G,X as Re,Y as Ie,Z as Me,$ as Se,a0 as $e}from"./index-B442cTzO.js";function Ce(){const e=p([]);se(()=>e.value=[]);function h(l,R){e.value[R]=l}return{refs:e,updateRef:h}}const Ae=Q({activeColor:String,start:{type:[Number,String],default:1},modelValue:{type:Number,default:e=>e.start},disabled:Boolean,length:{type:[Number,String],default:1,validator:e=>e%1===0},totalVisible:[Number,String],firstIcon:{type:F,default:"$first"},prevIcon:{type:F,default:"$prev"},nextIcon:{type:F,default:"$next"},lastIcon:{type:F,default:"$last"},ariaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.root"},pageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.page"},currentPageAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.currentPage"},firstAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.first"},previousAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.previous"},nextAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.next"},lastAriaLabel:{type:String,default:"$vuetify.pagination.ariaLabel.last"},ellipsis:{type:String,default:"..."},showFirstLastPage:Boolean,...be(),...ne(),...le(),...he(),...ge(),...fe(),...te({tag:"nav"}),...ae(),...ve({variant:"text"})},"VPagination"),Be=J()({name:"VPagination",props:Ae(),emits:{"update:modelValue":e=>!0,first:e=>!0,prev:e=>!0,next:e=>!0,last:e=>!0},setup(e,h){let{slots:l,emit:R}=h;const o=ie(e,"modelValue"),{t:v,n:V}=oe(),{isRtl:b}=re(),{themeClasses:_}=Z(e),{width:B}=ue(),k=ce(-1);W(void 0,{scoped:!0});const{resizeRef:N}=de(a=>{if(!a.length)return;const{target:s,contentRect:r}=a[0],f=s.querySelector(".v-pagination__list > *");if(!f)return;const y=r.width,S=f.offsetWidth+parseFloat(getComputedStyle(f).marginRight)*2;k.value=D(y,S)}),c=I(()=>parseInt(e.length,10)),d=I(()=>parseInt(e.start,10)),g=I(()=>e.totalVisible!=null?parseInt(e.totalVisible,10):k.value>=0?k.value:D(B.value,58));function D(a,s){const r=e.showFirstLastPage?5:3;return Math.max(0,Math.floor(Number(((a-s*r)/s).toFixed(2))))}const z=I(()=>{if(c.value<=0||isNaN(c.value)||c.value>Number.MAX_SAFE_INTEGER)return[];if(g.value<=0)return[];if(g.value===1)return[o.value];if(c.value<=g.value)return T(c.value,d.value);const a=g.value%2===0,s=a?g.value/2:Math.floor(g.value/2),r=a?s:s+1,f=c.value-s;if(r-o.value>=0)return[...T(Math.max(1,g.value-1),d.value),e.ellipsis,c.value];if(o.value-f>=(a?1:0)){const y=g.value-1,S=c.value-y+d.value;return[d.value,e.ellipsis,...T(y,S)]}else{const y=Math.max(1,g.value-2),S=y===1?o.value:o.value-Math.ceil(y/2)+d.value;return[d.value,e.ellipsis,...T(y,S),e.ellipsis,c.value]}});function w(a,s,r){a.preventDefault(),o.value=s,r&&R(r,s)}const{refs:j,updateRef:E}=Ce();W({VPaginationBtn:{color:P(e,"color"),border:P(e,"border"),density:P(e,"density"),size:P(e,"size"),variant:P(e,"variant"),rounded:P(e,"rounded"),elevation:P(e,"elevation")}});const M=I(()=>z.value.map((a,s)=>{const r=f=>E(f,s);if(typeof a=="string")return{isActive:!1,key:`ellipsis-${s}`,page:a,props:{ref:r,ellipsis:!0,icon:!0,disabled:!0}};{const f=a===o.value;return{isActive:f,key:a,page:V(a),props:{ref:r,ellipsis:!1,icon:!0,disabled:!!e.disabled||Number(e.length)<2,color:f?e.activeColor:e.color,"aria-current":f,"aria-label":v(f?e.currentPageAriaLabel:e.pageAriaLabel,a),onClick:y=>w(y,a)}}}})),m=I(()=>{const a=!!e.disabled||o.value<=d.value,s=!!e.disabled||o.value>=d.value+c.value-1;return{first:e.showFirstLastPage?{icon:b.value?e.lastIcon:e.firstIcon,onClick:r=>w(r,d.value,"first"),disabled:a,"aria-label":v(e.firstAriaLabel),"aria-disabled":a}:void 0,prev:{icon:b.value?e.nextIcon:e.prevIcon,onClick:r=>w(r,o.value-1,"prev"),disabled:a,"aria-label":v(e.previousAriaLabel),"aria-disabled":a},next:{icon:b.value?e.prevIcon:e.nextIcon,onClick:r=>w(r,o.value+1,"next"),disabled:s,"aria-label":v(e.nextAriaLabel),"aria-disabled":s},last:e.showFirstLastPage?{icon:b.value?e.firstIcon:e.lastIcon,onClick:r=>w(r,d.value+c.value-1,"last"),disabled:s,"aria-label":v(e.lastAriaLabel),"aria-disabled":s}:void 0}});function t(){var s;const a=o.value-d.value;(s=j.value[a])==null||s.$el.focus()}function n(a){a.key===U.left&&!e.disabled&&o.value>Number(e.start)?(o.value=o.value-1,q(t)):a.key===U.right&&!e.disabled&&o.value<d.value+c.value-1&&(o.value=o.value+1,q(t))}return ee(()=>u(e.tag,{ref:N,class:["v-pagination",_.value,e.class],style:e.style,role:"navigation","aria-label":v(e.ariaLabel),onKeydown:n,"data-test":"v-pagination-root"},{default:()=>[u("ul",{class:"v-pagination__list"},[e.showFirstLastPage&&u("li",{key:"first",class:"v-pagination__first","data-test":"v-pagination-first"},[l.first?l.first(m.value.first):u($,C({_as:"VPaginationBtn"},m.value.first),null)]),u("li",{key:"prev",class:"v-pagination__prev","data-test":"v-pagination-prev"},[l.prev?l.prev(m.value.prev):u($,C({_as:"VPaginationBtn"},m.value.prev),null)]),M.value.map((a,s)=>u("li",{key:a.key,class:["v-pagination__item",{"v-pagination__item--is-active":a.isActive}],"data-test":"v-pagination-item"},[l.item?l.item(a):u($,C({_as:"VPaginationBtn"},a.props),{default:()=>[a.page]})])),u("li",{key:"next",class:"v-pagination__next","data-test":"v-pagination-next"},[l.next?l.next(m.value.next):u($,C({_as:"VPaginationBtn"},m.value.next),null)]),e.showFirstLastPage&&u("li",{key:"last",class:"v-pagination__last","data-test":"v-pagination-last"},[l.last?l.last(m.value.last):u($,C({_as:"VPaginationBtn"},m.value.last),null)])])]})),{}}}),Ne=Q({fixedHeader:Boolean,fixedFooter:Boolean,height:[Number,String],hover:Boolean,...ne(),...le(),...te(),...ae()},"VTable"),De=J()({name:"VTable",props:Ne(),setup(e,h){let{slots:l,emit:R}=h;const{themeClasses:o}=Z(e),{densityClasses:v}=me(e);return ee(()=>u(e.tag,{class:["v-table",{"v-table--fixed-height":!!e.height,"v-table--fixed-header":e.fixedHeader,"v-table--fixed-footer":e.fixedFooter,"v-table--has-top":!!l.top,"v-table--has-bottom":!!l.bottom,"v-table--hover":e.hover},o.value,v.value,e.class],style:e.style},{default:()=>{var V,b,_;return[(V=l.top)==null?void 0:V.call(l),l.default?u("div",{class:"v-table__wrapper",style:{height:ye(e.height)}},[u("table",null,[l.default()])]):(b=l.wrapper)==null?void 0:b.call(l),(_=l.bottom)==null?void 0:_.call(l)]}})),{}}}),Te={class:"text-white mb-1"},Fe=["onClick"],ze={class:"d-flex align-center"},je={class:"ml-3 font-weight-medium"},Ee={class:"d-flex justify-center align-center mt-4 gap-4"},X=20,He={__name:"MyMatches",setup(e){const h="https://30dlqduz990x74-5000.proxy.runpod.net",l=we(),R=xe(),o=p([]),v=p(!0),V=p({}),b=p({}),_=p(1),B=p(1),k=p(R.query.account_id||null),N=p("You"),c=t=>{l.push({name:"MatchResults",params:{matchId:t}})},d=t=>{const n=Math.floor(t/60),a=t%60;return`${n}:${a.toString().padStart(2,"0")}`},g=t=>new Date(t*1e3).toLocaleDateString(),D=t=>V.value[t]||"",z=t=>b.value[t]||"Unknown Hero",w=t=>t.player_slot<128?"Radiant":"Dire",j=t=>{const n=t.player_slot<128;return n&&t.radiant_win||!n&&!t.radiant_win?"Victory":"Defeat"},E=t=>{const n=t.player_slot<128;return n&&t.radiant_win||!n&&!t.radiant_win?"win":"loss"},M=async()=>{var t,n;try{v.value=!0;const a=(_.value-1)*X,s=k.value?`${h}/player-matches?account_id=${k.value}&offset=${a}`:`${h}/player-matches?offset=${a}`,r=await K.get(s,{withCredentials:!0});o.value=r.data.matches,N.value=((n=(t=r.data.player)==null?void 0:t.profile)==null?void 0:n.personaname)||"You"}catch(a){console.error("Failed to load matches",a)}finally{v.value=!1}},m=async()=>{try{const t=k.value?`${h}/win-lose-amount?account_id=${k.value}`:`${h}/win-lose-amount`,n=await K.get(t,{withCredentials:!0}),a=n.data.win+n.data.lose;B.value=Math.ceil(a/X),console.log("res:",n),console.log("Total matches:",a)}catch(t){console.error("Failed to load match count",t)}};return pe(_,M),ke(async()=>{await m(),await M();const n=await(await fetch("/NoToxic/heroes.json")).json();for(const a of Object.values(n))V.value[a.id]=`https://cdn.cloudflare.steamstatic.com${a.img}`,b.value[a.id]=a.localized_name}),(t,n)=>(A(),H(Ve,{fluid:"",class:"pa-8 fill-height",style:{"background-color":"var(--v-theme-surface)"}},{default:L(()=>[v.value?(A(),H(O,{key:0,align:"center",justify:"center",class:"fill-height"},{default:L(()=>[u(Y,{cols:"auto"},{default:L(()=>[u(Pe,{indeterminate:"",size:"50",color:"accent"})]),_:1})]),_:1})):(A(),H(O,{key:1,justify:"center"},{default:L(()=>[u(Y,{cols:"12"},{default:L(()=>[i("h2",Te,[n[1]||(n[1]=Le("ðŸŽ® Recent Matches for ")),i("strong",null,x(N.value),1)]),u(De,{class:"transparent-list text-white",dense:""},{default:L(()=>[n[2]||(n[2]=i("thead",null,[i("tr",null,[i("th",null,"Hero"),i("th",null,"Date"),i("th",null,"Result"),i("th",null,"Team"),i("th",null,"Duration"),i("th",null,"Kills"),i("th",null,"Deaths"),i("th",null,"Assists")])],-1)),i("tbody",null,[(A(!0),G(Re,null,Ie(o.value,a=>(A(),G("tr",{key:a.match_id,class:"hoverable",onClick:s=>c(a.match_id)},[i("td",ze,[u(Me,{size:"40"},{default:L(()=>[u(Se,{src:D(a.hero_id),alt:a.hero_name},null,8,["src","alt"])]),_:2},1024),i("span",je,x(z(a.hero_id)),1)]),i("td",null,x(g(a.start_time)),1),i("td",null,[i("span",{class:$e(["match-result",E(a)])},x(j(a)),3)]),i("td",null,x(w(a)),1),i("td",null,x(d(a.duration)),1),i("td",null,x(a.kills),1),i("td",null,x(a.deaths),1),i("td",null,x(a.assists),1)],8,Fe))),128))])]),_:1}),i("div",Ee,[u(Be,{modelValue:_.value,"onUpdate:modelValue":[n[0]||(n[0]=a=>_.value=a),M],length:B.value,color:"accent","total-visible":7},null,8,["modelValue","length"])])]),_:1})]),_:1}))]),_:1}))}},Ue=_e(He,[["__scopeId","data-v-f455736f"]]);export{Ue as default};
